# 5.2 인덱스란?

- DBMS도 데이터베이스 테이블의 모든 데이터를 검색해서 원하는 결과를 가져오려면 시간이 오래 걸린다.
- 컬럼의 값과 해당 레코드가 저장된 주소를 키와 값의 쌍으로 인덱스를 만들어 둔다면 빠르게 원하는 결과를 찾을 수 있다.
- DBMS의 인덱스는 컬럼 값을 주어진 순서대로 미리 정렬해서 보관하여 최대한 빠르게 찾아갈 수 있도록 지원한다.
- DBMS의 인덱스도 정렬된 리스트와 마찬가지로 저장되는 컬럼의 값을 이용해 항상 정렬된 상태를 유지한다.
- 정렬된 상태를 유지한다는 것은 새로운 데이터가 저장될 때마다 항상 값을 정렬해야 하므로 저장하는 과정이 복잡하고 느리지만 이미 정렬되어있기 때문에 원하는 값을 빠르게 찾을 수 있다;.
- 때문에 DBMS의 인덱스가 많은 테이블은 `INSERT` , `UPDATE` , `DELETE` 쿼리의 처리가 느려지지만 `SELECT` 문장은 빠르게 처리할 수 있다.
- 결론적으로 DBMS에서 인덱스는 데이터의 저장 성능을 희생하는 대신 데이터의 읽기 속도를 높이는 기능이다.
- 테이블의 인덱스를 하나 더 추가할지 말지는 데이터의 저장 속도를 어디까지 희생할 수 있는지, 읽기 속도를 얼마나 더 빠르게 만들어야 하는지 여부에 따라서 달라진다.
- `SELECT` 쿼리 문장의 `WHERE` 조건절에 사용되는 컬럼을 전부 인덱스로 생성해버리면 데이터 저장 성능이 떨어지고 인덱스의 크기가 비대해져 오히려 역호과가 날 수 있다.
- 인덱스는 데이터를 관리하는 방식과 중복값의 허용여부에 따라 여러가지로 나누어질 수 있다.
    - 인덱스를 역할별로 구분하는 경우
        - 기본키 (Primary Key)
            - 레코드를 대표하는 컬럼의 값으로 만들어진 인덱스를 의미한다.
            - 기본키는 테이블에서 해당 레코드를 식별할 수 있는 기준값이 되기 때문에 식별자라고도 부른다.
            - 기본키는 `NULL` 값과 중복을 허용하지 않는다.
        - 보조키 (Secondary Key)
            - 기본키를 제외한 나머지 인덱스는 보조키로 분류한다.
            - 유니크 인덱스는 기본키와 성격이 비슷하고 기본키를 대체할 수 있으므로 대체키라고도 불린다.
    - 데이터 저장 방식으로 분류하는 경우
        - B-Tree 인덱스
            - 가장 일반적으로 사용되는 인덱싱 알고리즘이다.
            - 컬럼의 값을 변형하지 않고 원래의 값을 이용해 인덱싱하는 알고리즘이다.
        - Hash 인덱스
            - 컬럼의 값으로 해시 값을 계산해서 인덱싱하는 알고리즘으로 매우 빠른 검색을 지원한다.
            - 값을 변형해서 인덱싱하기 때문에 값의 일부만 일치하는 경우를 검색하고자할 때에는 Hash 인덱스를 사용할 수 없다.
            - Hash 인덱스는 주로 메모리 기반의 데이터베이스에서 많이 사용한다.
        - Fractal-Tree 인덱스
            - B-Tree의 단점을 보안하기 위해 고안된 알고리즘이다.
            - 값을 변형하지 않고 인덱싱하며 범용적인 목적으로 사용할 수 있다는 점은 B-Tree와 비슷하지만 데이터의 저장 및 삭제 비용을 상당히 줄일 수 있게 설계되었다.
- 데이터의 중복 허용 여부로 분류하면 유니크 인덱스와 유니크하지 않은 인덱스로 구분할 수 있다.
- 인덱스가 유일한지 여부는 DBMS의 쿼리를 실행해야 하는 옵티마이저에게는 상당히 중요한 문제로 작용하며 유니크 인덱스에 대해 동등 조건으로 검색한다는 것은 항상 1 건의 레코드만 조회하면 된다는 것을 알려준다.

<br>

> 정리

- 인덱스는 DBMS에서 읽기 성능을 최적화하기 위해서 컬럼값과 해당 레코드의 주소 값을 키와 값의 쌍으로 만든것을 의미한다.
- 인덱스는 빠른 조회 성능을 제공하기 위해 항상 정렬된 상태로 유지되며 이 떄문에 새로운 데이터를 저장하는 경우에는 오히려 성능이 떨어지게 된다.
- 때문에 테이블의 인덱스를 추가하기 위해서는 데이터의 저장 성능을 어디까지 희생할 수 있는지 데이터의 읽기 성능을 어디까지 향상시켜야 하는지 고민해야 한다.
- 인덱스는 인덱스를 관리하는 방식과 중복 여부에 따라서 여러가지로 분류할 수 있다.
- 인덱스를 역할로 구분하는 경우 기본키와 보조키로 구분할 수 있으며 데이터를 저장하는 방식으로 구분할 경우 B-Tree, Hash, Fractal-Tree 인덱스로 구분할 수 있다.
- 인덱스를 중복 여부로 구분하는 경우 유니크 인덱스와 유니크하지 않은 인덱스로 구분할 수 있다.
